# Proje Dok√ºmantasyonu

## üìÑ Project Brief

**Proje √ñzeti**
Bu proje, YOLO nesne tespiti ile edge detection + free-space analizini birle≈ütirerek g√∂rme engelliler i√ßin ger√ßek zamanlƒ± g√ºvenli yol bulma ve sesli y√∂nlendirme sistemi geli≈ütirmeyi ama√ßlar. Sistem tƒ±pkƒ± otonom ara√ßlardaki gibi perception ‚Üí free-space ‚Üí path planning mantƒ±ƒüƒ±yla √ßalƒ±≈üƒ±r.

**Ama√ß**

- Kameradan alƒ±nan g√∂r√ºnt√ºlerle y√ºr√ºnebilir alanƒ± tespit etmek
- Engelleri YOLO ile algƒ±lamak
- Kenar tespiti (Canny) + IPM ile bo≈ü alan maskesi √ºretmek
- Bu iki bilgiyi birle≈ütirerek karar verme mekanizmasƒ± olu≈üturmak
- Kullanƒ±cƒ±ya sade sesli komutlarla y√∂n bilgisini aktarmak

**Ana √ñzellikler**

- YOLO ile engel algƒ±lama
- Edge + IPM ile free-space √ßƒ±karma
- Ku≈ü bakƒ±≈üƒ± alan analizi
- En g√ºvenli koridoru bulma
- Sesli y√∂nlendirme
- Mobil/JT/Jetson uyumluluƒüu

## üìÑ Product Context

**Problemin Tanƒ±mƒ±**
G√∂rme engelli kullanƒ±cƒ±lar i√ßin mevcut √ß√∂z√ºmler ya √ßok pahalƒ± (lidar tabanlƒ±) ya da d√º≈ü√ºk doƒüruluklu. Kamerayla √ßalƒ±≈üan ger√ßek zamanlƒ± bir yol bulma sistemi eksiktir.

**√úr√ºn√ºn Saƒüladƒ±ƒüƒ± Fayda**

- Kullanƒ±cƒ±nƒ±n g√ºvenli ≈üekilde y√ºr√ºmesine yardƒ±m eder
- Engel algƒ±lama + yol analizi tek pakette
- D√º≈ü√ºk donanƒ±mlarda bile √ßalƒ±≈üabilir
- Kask, g√∂zl√ºk veya telefon ≈üeklinde entegre olabilir

**Kullanƒ±cƒ± Deneyimi Hedefleri**

- Tek c√ºmlelik net y√∂nlendirmeler (‚ÄúSaƒüa d√∂n‚Äù, ‚ÄúD√ºz ilerle‚Äù)
- 20‚Äì30 FPS ger√ßek zamanlƒ± √ßalƒ±≈üma
- Yanlƒ±≈ü alarmƒ± azaltan √ßift katmanlƒ± algƒ±lama (YOLO + Canny)

## üìÑ System Patterns

**Sistem Mimarisi (Mod√ºler Servis Yapƒ±sƒ±)**

Sistem, geni≈ületilebilirliƒüi artƒ±rmak i√ßin mod√ºler bir servis mimarisine (Microservices-like) d√∂n√º≈üt√ºr√ºlm√º≈üt√ºr.

1.  **App (Orchestrator):** Ana kontrolc√º. Sesli komutlarƒ± dinler ve ilgili servisleri ba≈ülatƒ±r/durdurur.
2.  **VoiceService:** Mikrofonu dinler, Speech-to-Text (STT) yapar ve komutlarƒ± metne √ßevirir.
3.  **AudioService:** Metinleri sese √ßevirir (TTS) ve √ßalar.
4.  **NavigationService:** G√∂r√ºnt√º i≈üleme pipeline'ƒ±nƒ± (YOLO+IPM) √ßalƒ±≈ütƒ±rƒ±r ve y√∂nlendirme yapar.

**Ana Desenler**

- **Service-Based Architecture:** Her √∂zellik baƒüƒ±msƒ±z bir servis sƒ±nƒ±fƒ±dƒ±r (`BaseService`'den t√ºretilir).
- **Event-Driven:** Sesli komutlar birer olay (event) olarak i≈ülenir.
- **Threaded Execution:** Her servis kendi thread'inde √ßalƒ±≈üƒ±r, b√∂ylece ana d√∂ng√º bloklanmaz.

**Kritik ƒ∞≈ü Akƒ±≈ülarƒ±**

1.  Kullanƒ±cƒ± "Navigasyon Ba≈ülat" der.
2.  `VoiceService` komutu algƒ±lar ve `App`'e iletir.
3.  `App`, `NavigationService`'i ba≈ülatƒ±r.
4.  `NavigationService` kamerayƒ± a√ßar, `VisionPipeline`'ƒ± √ßalƒ±≈ütƒ±rƒ±r ve `AudioService` √ºzerinden y√∂nlendirme yapar.

## üìÑ Tech Context

**Kullanƒ±lan Teknolojiler**

- YOLOv8 / YOLOv11
- OpenCV (Canny, morphology, warpPerspective)
- MiDaS (opsiyonel depth)
- Python
- ONNX Runtime / TensorRT (optimizasyon)

**Teknik Kƒ±sƒ±tlar**

- Mobil cihazlarda hƒ±z sƒ±nƒ±rlƒ±
- Depth olmadan yakƒ±nlƒ±k tahmini hata payƒ± i√ßerir
- IPM i√ßin kamera a√ßƒ± kalibrasyonu gerekir

**Geli≈ütirme Ara√ßlarƒ±**

- Python
- VSCode + Cline
- OpenCV
- ONNX

## üìÑ Active Context

**Son Aktif Durum**

- Temel g√∂r√ºnt√º i≈üleme pipeline'ƒ± (YOLO + Canny + IPM) tamamlandƒ±.
- Hibrit Engel Haritasƒ± (Free-Space Mask + YOLO Projeksiyonu) olu≈üturuldu.
- Geli≈ümi≈ü y√∂n bulma algoritmasƒ± (Free-Space tabanlƒ±) entegre edildi.
- Sesli geri bildirim sistemi (gTTS + Pygame) sorunsuz √ßalƒ±≈üƒ±yor.

**Tamamlanan G√∂revler**

- [x] YOLO nesne tespiti entegrasyonu
- [x] Canny kenar tespiti
- [x] IPM (Inverse Perspective Mapping) d√∂n√º≈ü√ºm√º
- [x] BEV (Bird's Eye View) Free-Space Maskesi
- [x] YOLO kutularƒ±nƒ±n BEV haritasƒ±na izd√º≈ü√ºm√º
- [x] Free-Space tabanlƒ± akƒ±llƒ± y√∂n bulma algoritmasƒ±
- [x] T√ºrk√ße sesli komut sistemi

**Sƒ±rada Ne Var?**

- Saha testleri ve IPM kalibrasyonunun ince ayarƒ±.
- Performans optimizasyonu (Jetson/Raspberry Pi i√ßin).

## üìÑ Progress

**Ne ƒ∞≈üliyor?**

- Sistem ger√ßek zamanlƒ± olarak engelleri ve yol sƒ±nƒ±rlarƒ±nƒ± tespit ediyor.
- Ku≈ü bakƒ±≈üƒ± harita √ºzerinde g√ºvenli y√ºr√ºnebilir alanlar (ye≈üil) g√∂rselle≈ütiriliyor.
- En geni≈ü bo≈ü koridora g√∂re "SOL", "SAƒû" veya "D√úZ" komutlarƒ± veriliyor.
- Yakƒ±n engellerde "DUR" veya "YAKIN" uyarƒ±sƒ± yapƒ±lƒ±yor.

**Ne Eksik?**

- Farklƒ± kamera a√ßƒ±larƒ± i√ßin otomatik kalibrasyon aracƒ±.
- Derinlik (Depth) tahmini i√ßin stereo kamera veya MiDaS entegrasyonu (Gelecek s√ºr√ºm).

**Hatalar / Riskler**

- IPM matrisi sabit deƒüerlerle √ßalƒ±≈üƒ±yor; kamera a√ßƒ±sƒ± deƒüi≈üirse kalibrasyon bozulabilir.
- √áok karma≈üƒ±k ƒ±≈üƒ±k ko≈üullarƒ±nda Canny kenar tespiti g√ºr√ºlt√ºl√º olabilir.

**Sonu√ß**

- Projenin temel prototipi ba≈üarƒ±yla tamamlandƒ±. Sistem, belirlenen mimariye uygun olarak Perception -> Mapping -> Planning -> Action d√∂ng√ºs√ºn√º ger√ßekle≈ütiriyor.
